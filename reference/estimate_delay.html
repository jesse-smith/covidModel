<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Estimate Reporting Delay Using a Simple Moving Average — estimate_delay • covidModel</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Estimate Reporting Delay Using a Simple Moving Average — estimate_delay"><meta property="og:description" content="estimate_delay() estimates the time it takes for a given percentage of
samples collected on a certain date to be reported."><meta property="og:image" content="https://jesse-smith.github.io/covidModel/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">covidModel</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Estimate Reporting Delay Using a Simple Moving Average</h1>
    
    <div class="hidden name"><code>estimate_delay.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>estimate_delay()</code> estimates the time it takes for a given percentage of
samples collected on a certain date to be reported.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">estimate_delay</span><span class="op">(</span>
  <span class="va">.data</span>,
  .collection_date <span class="op">=</span> <span class="st">"collection_date"</span>,
  .report_date <span class="op">=</span> <span class="st">"report_date"</span>,
  pct <span class="op">=</span> <span class="fl">0.9</span>,
  period <span class="op">=</span> <span class="fl">14L</span>,
  today <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span>,
  rtn <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"last_complete"</span>, <span class="st">"incomplete_only"</span>, <span class="st">"all"</span><span class="op">)</span>,
  min_dt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2020-04-12"</span><span class="op">)</span>,
  quiet <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>.data</dt>
<dd><p>A data frame containing one incident observation per row</p></dd>
<dt>.collection_date</dt>
<dd><p><code>&lt;tidy-select&gt;</code> A <code>Date</code> column to use as the
collection date of the observed case</p></dd>
<dt>.report_date</dt>
<dd><p><code>&lt;tidy-select&gt;</code> A <code>Date</code> column to use as the report
date of the observed case</p></dd>
<dt>pct</dt>
<dd><p>The quantile to use when computing the delay</p></dd>
<dt>period</dt>
<dd><p>The number of days to average over for the rolling comparison</p></dd>
<dt>today</dt>
<dd><p>The date to consider "today"</p></dd>
<dt>rtn</dt>
<dd><p>What to return. By default, this is a single-row <code>tibble</code>
containing the last complete <code>.collection_date</code>; it can also return either
incomplete dates only or all dates. All return values are tibbles with
the same columns; see <code>Value</code> for details.</p></dd>
<dt>min_dt</dt>
<dd><p>The minimum date to consider- set to the first reporting date
in SCHD data by default</p></dd>
<dt>quiet</dt>
<dd><p>Should information on observations excluded from the estimation
be shown?</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A <code>tibble</code> containing one row per date and columns for
<code>.collection_date</code>, <code>prior_delay</code>, <code>delay</code>, and <code>incomplete</code> status</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>To estimate reporting delay, <code>estimate_delay()</code> calculates quantiles of the
delay distribution corresponding to <code>pct</code> for each <code>.collection_date</code> in the
data. If reporting is complete, these quantiles are interpretable as the
time needed for <code>pct</code> samples to be reported from a given date. If reporting
is incomplete, these will be biased towards the portion of the delay
distribution that is prioritized in the reporting process. In SCHD data,
cases have been mostly processed in temporal order, so this bias is
upwards (towards longer delays).</p>
<p>Next, quantiles are weighted by the sample size on each date, and a rolling
average is calculated with a window equal to <code>period</code>. This is the
continuous domain equivalent of calculating the quantile over <code>period</code> days.</p>
<p>Finally, the averages for <code>t-period</code> to <code>t-1</code> are compared to time between
<code>today</code> and each date <code>t</code>. If the average is larger than this time
difference, reporting is considered incomplete; otherwise, reporting is
considered complete.</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jesse Smith.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

