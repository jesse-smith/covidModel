<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Bayesian Structural Time Series: Fit Model — bsts_fit • covidModel</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Bayesian Structural Time Series: Fit Model — bsts_fit" />
<meta property="og:description" content="Uses MCMC to sample from the posterior distribution of a Bayesian
  structural time series model.  This function can be used either with
  or without contemporaneous predictor variables (in a time series
  regression).
If predictor variables are present, the regression coefficients are
  fixed (as opposed to time varying, though time varying coefficients
  might be added as state component).  The predictors and response in
  the formula are contemporaneous, so if you want lags and differences
  you need to put them in the predictor matrix yourself.
If no predictor variables are used, then the model is an ordinary
  state space time series model.
The model allows for several useful extensions beyond standard
  Bayesian dynamic linear models.

A spike-and-slab prior is used for the (static) regression
      component of models that include predictor variables.  This is
      especially useful with large numbers of regressor series.
Both the spike-and-slab component (for static regressors) and
      the Kalman filter (for components of time series state) require
      observations and state variables to be Gaussian.  The bsts
      package allows for non-Gaussian error families in the observation
      equation (as well as some state components) by using data
      augmentation to express these families as conditionally
      Gaussian.
As of version 0.7.0, bsts supports having multiple
      observations at the same time point.  In this case the basic model
      is taken to be      $$y_{t,j} = Z_t^T \alpha_t + \beta^Tx_{t, j} + \epsilon_{t,j}.$$      This is a regression model where all observations with the same
      time point share a common time series effect.

" />
<meta property="og:image" content="https://jesse-smith.github.io/covidModel/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">covidModel</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Bayesian Structural Time Series: Fit Model</h1>
    
    <div class="hidden name"><code>bsts_fit.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Uses MCMC to sample from the posterior distribution of a Bayesian
  structural time series model.  This function can be used either with
  or without contemporaneous predictor variables (in a time series
  regression).</p>
<p>If predictor variables are present, the regression coefficients are
  fixed (as opposed to time varying, though time varying coefficients
  might be added as state component).  The predictors and response in
  the formula are contemporaneous, so if you want lags and differences
  you need to put them in the predictor matrix yourself.</p>
<p>If no predictor variables are used, then the model is an ordinary
  state space time series model.</p>
<p>The model allows for several useful extensions beyond standard
  Bayesian dynamic linear models.</p>
<p></p><ul>
<li><p>A spike-and-slab prior is used for the (static) regression
      component of models that include predictor variables.  This is
      especially useful with large numbers of regressor series.</p></li>
<li><p>Both the spike-and-slab component (for static regressors) and
      the Kalman filter (for components of time series state) require
      observations and state variables to be Gaussian.  The <code>bsts</code>
      package allows for non-Gaussian error families in the observation
      equation (as well as some state components) by using data
      augmentation to express these families as conditionally
      Gaussian.</p></li>
<li><p>As of version 0.7.0, <code>bsts</code> supports having multiple
      observations at the same time point.  In this case the basic model
      is taken to be      $$y_{t,j} = Z_t^T \alpha_t + \beta^Tx_{t, j} + \epsilon_{t,j}.$$      This is a regression model where all observations with the same
      time point share a common time series effect.</p></li>
</ul>

    </div>

    <pre class="usage"><span class='fu'>bsts_fit</span><span class='op'>(</span><span class='va'>state</span>, .data <span class='op'>=</span> <span class='va'>state</span><span class='op'>[[</span><span class='st'>".data"</span><span class='op'>]</span><span class='op'>]</span>, iterations <span class='op'>=</span> <span class='fl'>11000</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>.data</th>
      <td><p>An optional data frame, list or environment (or object
    coercible by <code><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></code> to a data frame) containing the
    variables in the model.  If not found in <code>data</code>, the variables
    are taken from <code><a href='https://rdrr.io/r/base/environment.html'>environment(formula)</a></code>, typically the
    environment from which <code><a href='https://rdrr.io/pkg/bsts/man/bsts.html'>bsts</a></code> is called.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Extra arguments to be passed to
    <code><a href='https://rdrr.io/pkg/BoomSpikeSlab/man/spike.slab.prior.html'>SpikeSlabPrior</a></code> (see the entry for the
    <code>prior</code> argument, above).</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class <code><a href='https://rdrr.io/pkg/bsts/man/bsts.html'>bsts</a></code> which is a list with the
  following components</p>
<p></p>
<dt>coefficients</dt><dd><p>A <code>niter</code> by <code><a href='https://rdrr.io/r/base/nrow.html'>ncol(X)</a></code> matrix of MCMC
    draws of the regression coefficients, where <code>X</code> is the design
    matrix implied by <code>formula</code>.  This is only present if a model
    formula was supplied.</p></dd>

  <dt>sigma.obs</dt><dd><p>A vector of length <code>niter</code> containing MCMC draws
    of the residual standard deviation.</p></dd>

  The returned object will also contain named elements holding the MCMC
  draws of model parameters belonging to the state models.  The names of
  each component are supplied by the entries in
  state.specification.  If a model parameter is a scalar, then
  the list element is a vector with niter elements.  If the
  parameter is a vector then the list element is a matrix with
  niter rows.  If the parameter is a matrix then the list element
  is a 3-way array with first dimension niter.

  Finally, if a model formula was supplied, then the returned object
  will contain the information necessary for the predict method to build
  the design matrix when a new prediction is made.

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>If the model family is logit, then there are two ways one can
  format the response variable.  If the response is 0/1,
  TRUE/FALSE, or 1/-1, then the response variable can be passed
  as with any other model family.  If the response is a set of
  counts out of a specified number of trials then it can be
  passed as a two-column matrix, where the first column contains
  the counts of successes and the second contains the count of
  failures.</p>
<p>Likewise, if the model family is Poisson, the response can be passed
  as a single vector of counts, under the assumption that each
  observation has unit exposure.  If the exposures differ across
  observations, then the resopnse can be a two column matrix, with the
  first column containing the event counts and the second containing
  exposure times.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Harvey (1990), "Forecasting, structural time series, and the Kalman
  filter", Cambridge University Press.</p>
<p>Durbin and Koopman (2001), "Time series analysis by state space
  methods", Oxford University Press.</p>
<p>Goerge and McCulloch (1997)
  "Approaches for Bayesian variable selection", Statistica Sinica pp
  339--374.</p>
<p>Ghosh and Clyde (2011)
  "Rao-Blackwellization for Bayesian variable selection and model averaging
  in linear and binary regression: a novel data augmentation approach",
  JASA pp 1041 --1052.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='https://rdrr.io/pkg/bsts/man/bsts.html'>bsts</a></code>,
  <code><a href='https://rdrr.io/pkg/bsts/man/add.local.level.html'>AddLocalLevel</a></code>,
  <code><a href='https://rdrr.io/pkg/bsts/man/add.local.linear.trend.html'>AddLocalLinearTrend</a></code>,
  <code><a href='https://rdrr.io/pkg/bsts/man/add.semilocal.linear.trend.html'>AddSemilocalLinearTrend</a></code>,
  <code><a href='https://rdrr.io/pkg/bsts/man/add.seasonal.html'>AddSeasonal</a></code>
  <code><a href='https://rdrr.io/pkg/bsts/man/add.dynamic.regression.html'>AddDynamicRegression</a></code>
  <code><a href='https://rdrr.io/pkg/BoomSpikeSlab/man/spike.slab.prior.html'>SpikeSlabPrior</a></code>,
  <code><a href='https://rdrr.io/pkg/Boom/man/sd.prior.html'>SdPrior</a></code>.</p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Steven L. Scott  <a href='mailto:steve.the.bayesian@gmail.com'>steve.the.bayesian@gmail.com</a></p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Jesse Smith.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


